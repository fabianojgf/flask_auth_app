{% extends "admin/users/users.html" %}

{% block content_user %}

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
<link href="https://cdn.datatables.net/1.13.1/css/dataTables.bulma.min.css" rel="stylesheet">

<h2 class="subtitle">Usuários</h2>
<hr/>

<div class="container" style="width:100%; text-align: right;">
  <a class="button is-info" href="{{ url_for('admin_user.user_new') }}">
    <span class="icon is-small">
      <i class="fa fa-plus-circle" aria-hidden="true"></i>
    </span>
    <span>Adicionar</span>
  </a>
</div>
<br />

<div class="container" style="width:100%;">
  <table id="table" class="table is-striped" style="width:100%">
    <thead>
      <tr>
        <th style="width: 5%; text-align: center;">ID</th>
        <th style="width: 20%;">Nome</th>
        <th style="width: 20%;">Email</th>
        <th style="width: 10%;">Tipo</th>
        <th style="width: 10%;">Autorizado</th>
        <th style="width: 13%; text-align: center;">Creation Date</th>
        <th style="width: 13%; text-align: center;">Update Date</th>
        <th style="width: 3%; text-align: center;"></th>
        <th style="width: 3%; text-align: center;"></th>
        <th style="width: 3%; text-align: center;"></th>
      </tr>
    </thead>
    <tbody>
      {% for user in users %}
      <tr>
        <td style="text-align: center;">{{ user.id }}</td>
        <td>{{ user.name }}</td>
        <td>{{ user.email }}</td>
        <td style="text-align: center;">{{ user.user_type.description }}</td>
        <td style="text-align: center;">{{ 'Sim' if user.authorized else 'Não' }}</td>
        <td style="text-align: center;">{{ user.creation_date }}</td>
        <td style="text-align: center;">{{ user.update_date }}</td>
        <td style="text-align: center;">
          {% if user.authorized %}
            <a class="button is-info is-square" href="#" title="Desautorizar">
              <span class="icon is-small">
                <i class="fa fa-lock" aria-hidden="true"></i>
              </span>
            </a>
          {% endif %}
          {% if not user.authorized %}
          <a class="button is-info is-square" href="#" title="Autorizar">
            <span class="icon is-small">
              <i class="fa fa-unlock" aria-hidden="true"></i>
            </span>
          </a>
          {% endif %}
        </td>
        <td style="text-align: center;">
          <a class="button is-primary is-square" href="#" title="Editar">
            <span class="icon is-small">
              <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
            </span>
          </a>
        </td>
        <td style="text-align: center;">
          <a class="button is-danger is-square" href="#" title="Remover">
            <span class="icon is-small">
              <i class="fa fa-trash" aria-hidden="true"></i>
            </span>
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script type="text/javascript">
  $(document).ready(function () {
    $('#table').DataTable();
  });
</script>

<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.1/js/dataTables.bulma.min.js"></script>

{% endblock %}